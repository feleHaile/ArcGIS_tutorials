<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<title>Focal operations</title>
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Helvetica;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:6.0pt;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;}
h1
	{mso-style-link:"Heading 1 Char";
	margin-top:24.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria",serif;
	color:#365F91;
	font-weight:bold;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:13.0pt;
	font-family:"Cambria",serif;
	color:#4F81BD;
	font-weight:bold;}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Cambria",serif;
	color:#4F81BD;
	font-weight:bold;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:6.0pt;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;}
p.MsoList, li.MsoList, div.MsoList
	{margin-top:6.0pt;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.25in;
	text-indent:-.25in;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;}
p.MsoListCxSpFirst, li.MsoListCxSpFirst, div.MsoListCxSpFirst
	{margin-top:6.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.25in;
	margin-bottom:.0001pt;
	text-indent:-.25in;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;}
p.MsoListCxSpMiddle, li.MsoListCxSpMiddle, div.MsoListCxSpMiddle
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.25in;
	margin-bottom:.0001pt;
	text-indent:-.25in;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;}
p.MsoListCxSpLast, li.MsoListCxSpLast, div.MsoListCxSpLast
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.25in;
	text-indent:-.25in;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"Title Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:26.0pt;
	font-family:"Cambria",serif;
	color:#17365D;
	letter-spacing:.25pt;}
p.MsoTitleCxSpFirst, li.MsoTitleCxSpFirst, div.MsoTitleCxSpFirst
	{mso-style-link:"Title Char";
	margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:26.0pt;
	font-family:"Cambria",serif;
	color:#17365D;
	letter-spacing:.25pt;}
p.MsoTitleCxSpMiddle, li.MsoTitleCxSpMiddle, div.MsoTitleCxSpMiddle
	{mso-style-link:"Title Char";
	margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:26.0pt;
	font-family:"Cambria",serif;
	color:#17365D;
	letter-spacing:.25pt;}
p.MsoTitleCxSpLast, li.MsoTitleCxSpLast, div.MsoTitleCxSpLast
	{mso-style-link:"Title Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:26.0pt;
	font-family:"Cambria",serif;
	color:#17365D;
	letter-spacing:.25pt;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p
	{margin-right:0in;
	margin-left:0in;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Balloon Text Char";
	margin-top:6.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Tahoma",sans-serif;}
span.MsoPlaceholderText
	{color:gray;}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:6.0pt;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.5in;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{margin-top:6.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.5in;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:24.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria",serif;
	color:#365F91;
	font-weight:bold;}
span.apple-converted-space
	{mso-style-name:apple-converted-space;}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-link:"Balloon Text";
	font-family:"Tahoma",sans-serif;}
p.Stepheader, li.Stepheader, div.Stepheader
	{mso-style-name:"Step header";
	mso-style-link:"Step header Char";
	margin-top:7.5pt;
	margin-right:0in;
	margin-bottom:7.5pt;
	margin-left:0in;
	font-size:14.0pt;
	font-family:"Arial",sans-serif;
	color:#4F81BD;
	font-weight:bold;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Cambria",serif;
	color:#365F91;
	font-weight:bold;}
span.StepheaderChar
	{mso-style-name:"Step header Char";
	mso-style-link:"Step header";
	font-family:"Arial",sans-serif;
	color:#4F81BD;
	font-weight:bold;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Cambria",serif;
	color:#4F81BD;
	font-weight:bold;}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Cambria",serif;
	color:#4F81BD;
	font-weight:bold;}
p.Instructions, li.Instructions, div.Instructions
	{mso-style-name:Instructions;
	mso-style-link:"Instructions Char";
	margin-top:6.0pt;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:13.0pt;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;
	color:#0070C0;}
span.InstructionsChar
	{mso-style-name:"Instructions Char";
	mso-style-link:Instructions;
	font-family:"Arial",sans-serif;
	color:#0070C0;}
p.Instructions-GIS, li.Instructions-GIS, div.Instructions-GIS
	{mso-style-name:Instructions-GIS;
	mso-style-link:"Instructions-GIS Char";
	margin-top:6.0pt;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:13.0pt;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;
	color:#0070C0;}
span.Instructions-GISChar
	{mso-style-name:"Instructions-GIS Char";
	mso-style-link:Instructions-GIS;
	font-family:"Arial",sans-serif;
	color:#0070C0;}
p.Stepheader-GIS, li.Stepheader-GIS, div.Stepheader-GIS
	{mso-style-name:"Step header-GIS";
	mso-style-link:"Step header-GIS Char";
	margin-top:7.5pt;
	margin-right:0in;
	margin-bottom:7.5pt;
	margin-left:.25in;
	text-indent:-.25in;
	page-break-after:avoid;
	background:#8DB3E2;
	border:none;
	padding:0in;
	font-size:14.0pt;
	font-family:"Arial",sans-serif;
	color:white;
	font-weight:bold;}
span.Stepheader-GISChar
	{mso-style-name:"Step header-GIS Char";
	mso-style-link:"Step header-GIS";
	font-family:"Arial",sans-serif;
	color:white;
	background:#8DB3E2;
	font-weight:bold;}
span.TitleChar
	{mso-style-name:"Title Char";
	mso-style-link:Title;
	font-family:"Cambria",serif;
	color:#17365D;
	letter-spacing:.25pt;}
.MsoChpDefault
	{font-family:"Calibri",sans-serif;}
.MsoPapDefault
	{margin-bottom:10.0pt;
	line-height:115%;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=EN-US link=blue vlink=purple>

<div class=WordSection1>

<p class=MsoNormal align=center style='text-align:center'><b><span
style='font-size:20.0pt;line-height:115%;color:#365F91'>Map Algebra: Focal
Operations</span></b></p>

<div class=MsoNormal align=center style='text-align:center'>

<hr size=1 width="100%" noshade style='color:#CCCCCC' align=center>

</div>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='margin-left:.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=707 valign=top style='width:809.6pt;border:none;background:#F2F2F2;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoListParagraphCxSpFirst style='margin-top:7.5pt;margin-right:0in;
  margin-bottom:7.5pt;margin-left:.5in;text-indent:-.25in;line-height:13.0pt'><span
  style='color:black'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
  </span></span><span style='color:black'>Create a folder called <b>MapAlgebraFocal</b></span><span
  style='color:black;background:#F2F2F2'> somewhere under your personal
  directory (e.g. C:\Users\jdoe\Documents\Tutorials\</span></span><span
  style='color:black'>MapAlgebraFocal).</span></p>
  <p class=MsoListParagraphCxSpLast style='margin-top:7.5pt;margin-right:0in;
  margin-bottom:7.5pt;margin-left:.5in;text-indent:-.25in;line-height:13.0pt'><span
  style='color:black'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
  </span></span><span style='color:black'>Download the </span><a
  href="MapAlgebraFocal_files/MapAlgebraFocal.zip">MapAlgebraFocal.zip</a><span
  style='color:black'> data for this exercise and extract the files to your
  newly created MapAlgebraFocal directory.</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
12.75pt'><span style='font-size:10.0pt;color:black'>&nbsp;</span></p>

<p class=MsoNormal>Note that this tutorial will make use of the <b>Spatial
Analyst </b>extension, so make sure to enable this extension from the pull-down
menu under <b>Customize &gt;&gt; Extensions</b>. Also, all output files should
be saved in the current project folder (i.e. ./MapAlgebraFocal).</p>

<div class=MsoNormal align=center style='text-align:center'>

<hr size=1 width="100%" noshade style='color:#CCCCCC' align=center>

</div>

<p class=MsoTocHeading><a name="_Toc286147277">Contents</a></p>

<p class=MsoToc1><a href="#_Toc519174888">Step 1:<span style='font-size:11.0pt;
line-height:115%;font-family:"Calibri",sans-serif;color:windowtext;text-decoration:
none'>        </span>Open the map document<span style='color:windowtext;
display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></p>

<p class=MsoToc1><a href="#_Toc519174889">Step 2:<span style='font-size:11.0pt;
line-height:115%;font-family:"Calibri",sans-serif;color:windowtext;text-decoration:
none'>        </span>Smoothing a raster surface: 3 by 3 mean<span
style='color:windowtext;display:none;text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></p>

<p class=MsoToc1><a href="#_Toc519174890">Step 3:<span style='font-size:11.0pt;
line-height:115%;font-family:"Calibri",sans-serif;color:windowtext;text-decoration:
none'>        </span>Smoothing a raster surface: 10 km median<span
style='color:windowtext;display:none;text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></p>

<p class=MsoToc1><a href="#_Toc519174891">Step 4:<span style='font-size:11.0pt;
line-height:115%;font-family:"Calibri",sans-serif;color:windowtext;text-decoration:
none'>        </span>Smoothing a raster surface: custom neighborhood<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></p>

<p class=MsoNormal>&nbsp;</p>

<div class=MsoNormal align=center style='text-align:center'>

<hr size=1 width="100%" noshade style='color:#CCCCCC' align=center>

</div>

<div style='border:solid #548DD4 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#8DB3E2'>

<p class=Stepheader-GIS><a name="_Toc519174888">Step 1:<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Open the map document</a></p>

</div>

<p class=Instructions-GIS>Open the <b>Elevation.mxd</b> map document.</p>

<p class=MsoNormal><img width=490 height=202 id="Picture 3"
src="MapAlgebraFocal_files/image001.png"></p>

<p class=MsoNormal>The map consists of an elevation raster (in meters) and a elevation
labels layer. The labels layer shows the elevation value for each pixel, but
note that this layer is not useful unless you are zoomed in on a subset of
pixels.</p>

<p class=MsoNormal><img width=476 height=163 id="Picture 5"
src="MapAlgebraFocal_files/image002.png"></p>

<p class=MsoNormal>&nbsp;</p>

<div style='border:solid #548DD4 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#8DB3E2'>

<p class=Stepheader-GIS><a name="_Toc519174889">Step 2:<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Smoothing a raster surface: 3 by 3 mean</a></p>

</div>

<p class=MsoNormal>In this step, you will create a new raster where each pixel
will reflect the average value of neighboring input pixels. Because the output
pixel is influenced by neighboring input pixels (and not just input pixels
sharing the same exact location), this type of operation is referred to as a <b>focal
operation</b>.</p>

<p class=MsoNormal>In the following exercise, you will compute the average
value from a 3 by 3 cell cluster.</p>

<table class=MsoTableGrid border=0 cellspacing=0 cellpadding=0 align=left
 style='border-collapse:collapse;border:none;margin-left:6.75pt;margin-right:
 6.75pt'>
 <tr>
  <td width=222 valign=top style='width:166.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=Instructions-GIS>Open the <b>Focal Statistics</b> tool under <b>
  Spatial Analyst Tools &gt;&gt; Neighborhood</b>.</p>
  <p class=Instructions-GIS>&nbsp;</p>
  <p class=Instructions-GIS>Set the neighborhood to a 3 cell by 3 cell
  rectangle and the output statistic to “<b>MEAN</b>”.</p>
  <p class=Instructions-GIS>&nbsp;</p>
  <p class=Instructions-GIS>Name the output <b>elev_3x3.img.</b></p>
  </td>
  <td width=299 valign=top style='width:224.1pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal'><img width=236 height=301 id="Picture 1"
  src="MapAlgebraFocal_files/image003.jpg"></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><br>
<br>
</p>

<p class=MsoNormal style='margin-top:0in'><br>
<br>
</p>

<p class=MsoListParagraphCxSpFirst style='margin-top:0in;margin-right:0in;
margin-bottom:10.0pt;margin-left:1.0in'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:10.0pt;margin-left:1.0in'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:10.0pt;margin-left:1.0in'><br>
<br>
</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:10.0pt;margin-left:1.0in'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:10.0pt;margin-left:1.0in'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:10.0pt;margin-left:1.0in'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:10.0pt;margin-left:1.0in'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:10.0pt;margin-left:1.0in'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:10.0pt;margin-left:1.0in'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:10.0pt;margin-left:1.0in'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:10.0pt;margin-left:1.0in'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:10.0pt;margin-left:0in'>The output raster is made up of the same
number of pixels and pixel size as the input layer. The difference is in the
raster values.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:10.0pt;margin-left:0in'><img width=624 height=188 id="Picture 6"
src="MapAlgebraFocal_files/image004.png"></p>

<p class=MsoListParagraphCxSpLast style='margin-top:0in;margin-right:0in;
margin-bottom:10.0pt;margin-left:0in'>&nbsp;</p>

<p class=Instructions-GIS>Zoom in on a 3x3 cluster of pixels and extract the
pixel value of an elev_3x3.img cell using the <b>Identify tool</b> (make sure
to select the elev_3x3.img layer from the identify window). The pixel value
should equal the average of the 3x3 cluster.</p>

<p class=MsoListParagraphCxSpFirst style='margin-top:0in;margin-right:0in;
margin-bottom:10.0pt;margin-left:0in'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:10.0pt;margin-left:0in'>In the following example, the output cell
(selected with the <i>Identify</i> tool) equals
(898+1413+1418+1505+1367+1505+1379+1389+1938) / 9 = 1423.56</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:10.0pt;margin-left:0in'>&nbsp;</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:10.0pt;margin-left:0in'><img width=624 height=264 id="Picture 8"
src="MapAlgebraFocal_files/image005.png"></p>

<p class=MsoListParagraphCxSpLast style='margin-top:0in;margin-right:0in;
margin-bottom:10.0pt;margin-left:0in'>&nbsp;</p>

<div style='border:solid #548DD4 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#8DB3E2'>

<p class=Stepheader-GIS><a name="_Toc519174890">Step 3:<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Smoothing a raster surface: 10 km median</a></p>

</div>

<p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
10.0pt;margin-left:0in'>The <b>Focal Statistics</b> tool can also be used to
compute the summary statistic of pixels based on map units and not pixel numbers.
In the following example, a 10 km radius is used to define the pixels whose
values will be used to compute the output raster pixels. We will also make use
of the median as a summary statistic instead of the mean.</p>

<table class=MsoTableGrid border=0 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=214 valign=top style='width:160.4pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=Instructions-GIS>Open the <b>Focal Statistics</b> tool under (under Spatial
  <b>Analyst Tools &gt;&gt; Neighborhood</b>).</p>
  <p class=Instructions-GIS>&nbsp;</p>
  <p class=Instructions-GIS>Set the neighborhood to a 10 km (radius) circle and
  the output statistic to “MEDIAN”.</p>
  <p class=Instructions-GIS>&nbsp;</p>
  <p class=Instructions-GIS>Name the output <b>elev_10km.img</b>.</p>
  </td>
  <td width=307 valign=top style='width:230.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal'><img width=268 height=332 id="Picture 9"
  src="MapAlgebraFocal_files/image006.jpg"></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in'>&nbsp;</p>

<p class=MsoNormal style='margin-top:0in'>For a pixel to be included in the
search radius, its center must fall within the radius. In the following
example, pixels whose values are <b>1310</b>, <b>1226</b>, <b>616</b> and <b>1874</b>
are <i>not</i> used to compute the output cell at the center of the 10km radius
since their centers fall outside of the search radius.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.0pt;
margin-left:.25in'><span style='font-size:14.0pt;line-height:115%'><img
width=289 height=272 id="Picture 12" src="MapAlgebraFocal_files/image007.png"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.0pt;
margin-left:.25in'><span style='font-size:14.0pt;line-height:115%'>&nbsp;</span></p>

<div style='border:solid #548DD4 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#8DB3E2'>

<p class=Stepheader-GIS><a name="_Toc519174891">Step 4:<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Smoothing a raster surface: custom neighborhood</a></p>

</div>

<p class=MsoNormal>The focal operation does not need to be restricted to a pre-defined
list of neighbor definitions, for example, you might want to exclude central
cells from the output (i.e. the 3x3 neighbor would consist of 8 input pixels
instead of 9).</p>

<p class=MsoNormal>To customize the neighborhood definition, you need to create
an ASCII text file. One is already created for this tutorial and is named <b>Kernel1.txt</b>.
Note that a text file differs from a Word file and should therefore be created
and saved using a basic text editor such as Windows Notepad.</p>

<p class=Instructions-GIS>In your project folder, right-click on <b>Kernel1.txt</b>
and select to have it opened with <b>Notepad</b>.</p>

<p class=MsoNormal><img width=523 height=182 id="Picture 13"
src="MapAlgebraFocal_files/image008.png"></p>

<p class=MsoNormal>The current file consists of 4 lines. The first line defines
the width and height of the neighborhood matrix (in pixels) and the next three
lines define the neighbor layout with a value of 1 used to define the pixels to
include and a value of 0 to define those to exclude</p>

<p class=MsoNormal><img width=219 height=142 id="Picture 14"
src="MapAlgebraFocal_files/image009.png"></p>

<p class=Instructions-GIS>Close the text editor.</p>

<p class=Instructions-GIS>Open the <b>Focal Statistics</b> tool (under Spatial <b>Analyst
Tools &gt;&gt; Neighborhood</b>). And fill out the first few fields as shown
below and select <b>Irregular</b> from the <i>Neighborhood</i> pull-down
option.</p>

<p class=Instructions-GIS><img width=312 height=178 id="Picture 15"
src="MapAlgebraFocal_files/image010.png"></p>

<p class=MsoNormal>You’ll note that selecting <b><i>Irregular</i></b> modifies
the tool’s interface. </p>

<p class=Instructions-GIS>Select the <b>Kernel1.txt</b> file from your working
directory.</p>

<p class=Instructions-GIS><img width=292 height=260 id="Picture 17"
src="MapAlgebraFocal_files/image011.png"></p>

<p class=Instructions-GIS>Click <b>OK</b> to run the geoprocess.</p>

<p class=MsoNormal>The output values will be different from those in
elev_3x3.img. For example, revisiting the subset of pixels in Step 2, we
compute a slightly different output pixel value of (898+1413+1418+1505+<s><span
style='color:red'>1367</span></s>+1505+1379+1389+1938) / <span
style='color:red'>8</span> = 1430.63.</p>

<p class=MsoNormal><img width=445 height=168 id="Picture 18"
src="MapAlgebraFocal_files/image012.png"></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The kernel file can also be used to define cell weights (but
note that only the mean, standard deviation and sum statistics can be computed
for such a kernel). For example, if we want the right most pixels to be weighted
twice as much as the other pixels, the kernel file could look like this:</p>

<p class=MsoNormal><img width=218 height=174 id="Picture 4"
src="MapAlgebraFocal_files/image013.png"></p>

<p class=MsoNormal>Note that any value can be used (i.e. whole numbers or
fractions) as well as both negative and positive numbers.</p>

<p class=MsoNormal>To use a weighted file, you would need to select <b><i>Weight</i></b>
instead of <i>Irregular</i> from the <i>Neighborhood</i> pulldown option.</p>

<p class=MsoNormal><img width=200 height=61 id="Picture 7"
src="MapAlgebraFocal_files/image014.png"></p>

<p class=MsoNormal>Using the above weight kernel example, the output value for the
center of the following cluster of cells would be (898 * .25 + 1413 * .25 + 1418
* .5 + 1505 * .25 + 1505 * .5 + 1379 * .25 + 1389 * .25 + 1938 * .5) / 8 = 509.56.</p>

<p class=MsoNormal><img width=333 height=200 id="Picture 11"
src="MapAlgebraFocal_files/image015.png"></p>

<p class=MsoNormal>&nbsp;</p>

<div class=MsoNormal align=center style='margin-top:7.5pt;margin-right:0in;
margin-bottom:7.5pt;margin-left:0in;text-align:center;line-height:13.0pt'><span
style='font-size:10.0pt;color:black'>

<hr size=1 width="100%" noshade style='color:#CCCCCC' align=center>

</span></div>

<p class=MsoNormal><span style='font-size:10.0pt;line-height:115%;color:gray'><img
width=76 height=27 id="Picture 2" src="MapAlgebraFocal_files/image016.png"></span><span
style='font-size:10.0pt;line-height:115%;color:gray'> Manuel Gimond, last
modified on 7/12/2018</span></p>

<p class=MsoNormal align=right style='margin-top:7.5pt;margin-right:0in;
margin-bottom:7.5pt;margin-left:0in;text-align:right;line-height:13.0pt'><span
style='font-size:10.0pt;color:gray'> </span></p>

<p class=MsoNormal>&nbsp;</p>

</div>

</body>

</html>
